{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "admiral": {
      "type": "object",
      "properties": {
        "config": {
          "type": "object",
          "properties": {
            "server": {
              "type": "object",
              "properties": {
                "host": { "type": "string", "minLength": 1 },
                "port": { "type": "integer", "minimum": 1, "maximum": 65535 }
              },
              "required": ["host", "port"]
            },
            "database": {
              "type": "object",
              "properties": {
                "host": { "type": "string", "minLength": 1 },
                "port": { "type": "integer", "minimum": 1, "maximum": 65535 },
                "name": { "type": "string", "minLength": 1 },
                "user": { "type": "string", "minLength": 1 },
                "password": { "type": "string", "minLength": 1 },
                "sslMode": { "type": "string", "enum": ["disable", "require", "verify-ca", "verify-full"] }
              },
              "required": ["host", "port", "name", "user", "password", "sslMode"]
            },
            "auth": {
              "type": "object",
              "properties": {
                "oidcIssuer": { "type": "string", "format": "uri", "minLength": 1 },
                "oidcClientId": { "type": "string", "minLength": 1 },
                "oidcClientSecret": { "type": "string", "minLength": 1 },
                "sessionSecret": { "type": "string", "minLength": 1 }
              },
              "required": ["oidcIssuer", "oidcClientId", "oidcClientSecret", "sessionSecret"]
            },
            "storage": {
              "type": "object",
              "properties": {
                "type": { "type": "string", "enum": ["s3"] },
                "endpoint": { "type": "string" },
                "manifestsBucket": { "type": "string", "minLength": 1 },
                "revisionsBucket": { "type": "string", "minLength": 1 },
                "accessKey": { "type": "string" },
                "secretKey": { "type": "string" },
                "useSSL": { "type": "boolean" }
              },
              "required": ["type", "manifestsBucket", "revisionsBucket"]
            },
            "temporal": {
              "type": "object",
              "properties": {
                "hostPort": { "type": "string", "pattern": "^[^:]+:[0-9]+$" },
                "namespace": { "type": "string", "minLength": 1 }
              },
              "required": ["hostPort", "namespace"]
            }
          },
          "required": ["server", "database", "auth", "storage", "temporal"]
        }
      },
      "required": ["config"]
    }
  },
  "required": ["admiral"]
}